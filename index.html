<!DOCTYPE html>
<html>

<body>
    <button onclick="next()">Next Station</button>
    <button onclick="playLofi()">lofi</button>
    <button onclick="playJazz()">jazz</button>
    <div id="player"></div>

    <script>
        i = 0;
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', options);
        }

        //    DEFAULT ID M7lc1UVf-VE


        function onPlayerReady(event) {
            event.target.playVideo();
            options.videoId = genre[i];

        }

        // 5. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.

        //   var done = false;
        //   function onPlayerStateChange(event) {
        //     if (event.data == YT.PlayerState.PLAYING && !done) {
        //       setTimeout(stopVideo, 6000);
        //       done = true;
        //     }
        //   }
        function stopVideo() {
            player.stopVideo();
        }

        let jazz = ['NsB2eya4nFA', 'rNg90PU7Y1s', '2ccaHpy5Ewo', 'zab985qDgnU', 'oQg4VCw24Qo']
        let lofi = ['hHW1oY26kxQ','vFtX7iqnKUk','5AEbq6X33A8','c_IVcbEez8o','2L9vFNMvIBE']
        
        let genre = jazz

        let options = {
            height: '200',
            width: '200',
            videoId: 'NsB2eya4nFA',
            events: {
                'onReady': onPlayerReady,
                // 'onStateChange': onPlayerStateChange
            }
        }
        function next() {
            player.stopVideo()
            if (genre[i+1]){
                i = i + 1;
            } else {
                i = 0;
            }
            options.videoId = genre[i];
            player.cueVideoById({
                'videoId' : genre[i]
            })
            // onYouTubeIframeAPIReady();
            player.playVideo();
            console.log(options.videoId);
        }

        function playLofi(){
            genre = lofi;
            player.cueVideoById({
                'videoId' : genre[i]
            });
            player.playVideo();
        }

        function playJazz(){
            genre = jazz;
            player.cueVideoById({
                'videoId' : genre[i]
            });
            player.playVideo();
        }
    </script>
</body>

</html>